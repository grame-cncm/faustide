<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Faust Editor</title>
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700|Roboto:300,400" rel="stylesheet">

	<link rel=stylesheet href="codemirror/theme/eclipse.css">
	<link rel=stylesheet href="codemirror/lib/codemirror.css">
	<link rel=stylesheet href="codemirror/doc/docs.css">
	<link rel=stylesheet href="codemirror/addon/hint/show-hint.css">
	<link rel=stylesheet href="editor.css">
	<link rel=stylesheet href="font-awesome/css/font-awesome.min.css">
	<link rel=stylesheet href="tippy.css">
	<link rel=stylesheet href="faust.css">

</head>
<body>

	<div class="application">
		<div class="logozone"><img src="faust-logo.png" width=58px alt="LOGO"></div>
		<div class="actionzone">
			<div role=button class="action-button" title="(CTRL-R) Compile and run the Faust program" onclick="runFaustCode()">
				<i class="fa fa-play" aria-hidden="true"></i>
			</div>

			<div role=button class="action-button" title="Upload/Edit a local file" onclick="loadFaustCode()">
				<i class="fa fa-upload" aria-hidden="true"></i>
			</div>

			<div role=button class="action-button" title="Download/Save as a local file" onclick="saveFaustCode()">
				<i class="fa fa-download" aria-hidden="true"></i>
			</div>

			<div role=button class="action-button" title="(CTRL-D) Open the online documentation" onclick="faustDocumentation()">
				<i class="fa fa-book" aria-hidden="true"></i>
			</div>

			<div role=button class="action-button" title="Export/compile to specific plateform binary code" onclick="openExportDialog()">
				<i class="fa fa-plus-circle" aria-hidden="true"></i>
			</div>

			<div role=button class="action-button" title="Configure buffer size and Midi polyphony" onclick="openConfigDialog()">
				<i class="fa fa-wrench" aria-hidden="true"></i>
			</div>
			<div>
			</div>
			<form method="POST" name="menu" class="action-select" title="Activate MIDI polyphonic mode"  >
				<select id="selectedPoly" name="selectedPoly"
					onChange="setPoly(this.form.selectedPoly)">
					<option value = ON> ON </option>
					<option selected value = OFF> OFF </option>
				</select>
			</form>
		</div>

		<div id="myDropZone" class="dropzone" title="Drop a Faust file to edit" >
			<input id="filename" contenteditable="true" value="untitled.dsp"/>
		</div>

		<div class="editionzone">
			<textarea id="myTextarea">
import("stdfaust.lib");
process = +;
			</textarea>
		</div>
	</div>
	<input type="file" id="fileinput" style="display:none"/>

	<div class="modalwrapper" id="faustuiwrapper">
		<span class="closeBtn" onclick="stopFaustCode()">&times;</span>
		<div class="faustui" id="faustui"></div>
	</div>

	<div class="modalwrapper" id="exportwrapper">
		<span class="closeBtn" onclick="closeExportDialog()">&times;</span>
		<div class="exportui" id="exportui">
			<h1>Export Faust Code</h1>
			<input id="exportUrl" contenteditable="true" value="http://faustservice.grame.fr" onkeyup="onEnterKey()"/>
			<select id="Platform" onChange="changeArchs()"></select>
			<select id="Architecture" onChange="deleteQrCode()"> </select>
			<div id="exportButton" role=button class="export-button" onclick="exportFaustSource()">
				Export
			</div>

			<div id="qrDiv">
				<div id="loader">
					<i class="fa fa-cog fa-spin fa-3x fa-fw"></i>
				</div>
			</div>
		</div>
	</div>


	<div class="modalwrapper" id="configwrapper">
		<span class="closeBtn" onclick="closeConfigDialog()">&times;</span>
		<div class="configui" id="configui">
			<h1>Configure Running Mode</h1>
			<div class="config">

				<div class="config-element">
					<H3>Buffer size</H3>
					<form method="POST" name="menu">
						<select id="selectedBuffer" name="selectedBuffer"
							onChange="setBufferSize(this.form.selectedBuffer)">
							<option value = 128> 128 </option>
							<option selected value = 256> 256 </option>
							<option value = 512> 512 </option>
							<option value = 1024> 1024 </option>
							<option value = 2048> 2048 </option>
							<option value = 4096> 4096 </option>
							<option value = 8192> 8192 </option>
						</select>
					</form>
					<p>You can change the buffer size (from 256 to 8192 frames in ScripProcessor mode, it will be fixed at 128 frames in AudioWorklet mode).</p>
				</div>

				<div class="config-element">
					<H3>Polyphonic instrument</H3>
					<form method="POST" name="menu">
						<select id="polyVoices" name="polyVoices"
							onChange="setPolyVoices(this.form.polyVoices)">
							<option value = 4> 4 </option>
							<option value = 8> 8 </option>
							<option selected value = 16> 16 </option>
							<option value = 32> 32 </option>
							<option value = 64> 64 </option>
							<option value = 128> 128 </option>
						</select>
					</form>
					<p>Assuming your DSP code is <a href="http://faust.grame.fr/news/2016/01/13/polyphonic-instruments.html ">polyphonic ready</a>, you can activate the polyphonic mode, adjust the number of available voices, and test it with a MIDI device or application (usable with Chrome which implements the <a href="https://webaudio.github.io/web-midi-api/">Web MIDI API</a>). <p> Be sure to launch the HTML page <B>after</B> your MIDI application(s)/devices(s) to be sure MIDI ports are properly detected.</p>
				</div>
			</div>

		</div>
	</div>

	<script src="codemirror/lib/codemirror.js"></script>
	<script src="codemirror/mode/clike/clike.js"></script>
	<script src="codemirror/mode/faust/faust.js"></script>
	<script src="codemirror/mode/faust/faustsnippets.js"></script>
	<script src="codemirror/addon/edit/matchbrackets.js"></script>
	<script src="codemirror/addon/edit/closebrackets.js"></script>
	<script src="codemirror/addon/dialog/dialog.js"></script>
	<script src="codemirror/addon/search/search.js"></script>
	<script src="codemirror/addon/hint/show-hint.js"></script>
	<script src="codemirror/addon/hint/anyword-hint.js"></script>
	<!-- <script src="codemirror/addon/hint/faust-hint.js"></script> -->

    <script src="scripts/tippy.min.js"></script>
    <script src="scripts/jsscripts.js"></script>
    <script src="scripts/libfaust-wasm.js"></script>
    <script src="scripts/webaudio-wasm-wrapper.js"></script>
    <script src="scripts/compilefaust.js"></script>
	<script src="scripts/runfaust.js"></script>
	<script src="scripts/ExportLib.js"></script>
	<script src="scripts/qrcode.js"></script>
	<script src="scripts/exportUI.js"></script>

	<script src="scripts/faustlive.js"></script>

</body>
</html>
